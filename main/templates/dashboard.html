{% extends 'base_template.html' %}
{% load static %}
{% block extra_head %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
      integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
{% endblock %}
{% block title %}Dashboard{% endblock %}

{% block menu_item2 %}
<li class="selected menu"><a href="{% url 'Dashboard' %}"><img src="{% static 'images/dashboard_fill.svg' %}"
                                                               alt="Dashboard">Dashboard</a></li>
{% endblock %}

{% block content %}
<br><br><br><br><br>
<a href="{% url 'Donation Type' %}" class="btn btn-primary">Make a Donation!</a>
<a href="{% url 'Request Form' %}" class="btn btn-primary">Make a Request</a>
<!--for edit profile-->
{% if messages %}
<ul class="messages">
    {% for message in messages %}
    <li>{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
    {% endfor %}
</ul>
{% endif %}

<!--end edit profile-->
<div class="container mt-4">
    <div class="row">
        <div class="col-md-6 mb-4">
            <div class="card custom-card">
                <div class="card-body">
                    <img src="{% static unit.img_url %}" alt="{{ unit.unit_name }}" title="{{ unit.unit_name }}">
                    <p class="card-text">{{ profile.first_name }} {{ profile.last_name }}</p>
                    <p class="card-text">{{ profile.unit }}</p>
                </div>
            </div>
        </div>
        <div class="col-md-6 mb-4">
            <div class="card custom-card">
                <div class="card-body">
                    <h5 class="card-title">Completed Requests</h5>
                    <p class="card-text">Donor Area</p>
                    {% if requests_done_list %}
                    {% for done in requests_done_list %}
                    <p class="card-text">{{ done.area }}</p>
                    {% endfor %}
                    {% else %}
                    <p class="card-text">No data</p>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-6 mb-4">
            <div class="card custom-card">
                <div class="card-body">
                    <p class="card-text">Full Name {{ profile.first_name }} {{ profile.last_name }}</p>
                    <p class="card-text">Email {{ profile.email }}</p>
                    <p class="card-text">Phone {{ profile.phone }}</p>
                    <p class="card-text">Unit {{ profile.unit }}</p>

                    <!-- Button trigger modal -->
                    <!--                    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">-->
                    <!--                        Edit-->
                    <!--                    </button>-->
                    <!--                    <a href="{% url 'Edit Profile' %}" class="btn btn-primary orange">Edit profile</a>-->
                    <div class="btn btn-warning ">
                        <a href="{% url 'Edit Profile' %}" style="color: white; text-decoration: none;">Edit profile</a>
                    </div>

                </div>
            </div>
        </div>
        <div class="col-md-6 mb-4">
            <div class="card custom-card">
                <div class="card-body">
                    <a href="{% url 'Pending' %}"><h5 class="card-title">Pending Requests <i
                            class="bi bi-chevron-double-right"></i></h5></a>

                    <p class="card-text">Donor Area</p>
                    {% if requests_pending_list %}
                    {% for pending in requests_pending_list %}
                    <p class="card-text">{{ pending.date }} {{ pending.area }}</p>
                    {% endfor %}
                    {% else %}
                    <p class="card-text">No data</p>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>


<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <br><br><br><br><br>
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5" id="exampleModalLabel">Edit</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form method="post" action="{% url 'edit_user' %}">
                    {% csrf_token %}
                    {{ form.as_p }}
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="submit" class="btn btn-primary">Save changes</button>
            </div>
        </div>
    </div>
</div>

{% endblock %}